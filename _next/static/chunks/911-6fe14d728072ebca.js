"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[911],{8911:function(t,e,n){n.d(e,{k:function(){return at}});var r=n(7812),a=n(1925),i=n(3569),o=n(7294),c=n(4184),l=n.n(c),u=n(4152),s=n(9659),d=n(9499),f=n(6835),g=n(6938),p=n(5893);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=function(t){var e=t.disaggregations,n=t.currentDisaggregationName,r=t.selectedDisaggregation,a=t.matchingColors,i=t.onCheckBoxesChange,o=t.selectedCheckboxes,c=t.toggleRadio,v=t.setToggleRadio,m=u.uKc((function(t){return t.some((function(t){return t.type===n}))}),e),x=(0,f.Z)(m,2),y=x[0],b=x[1];return(0,p.jsxs)(p.Fragment,{children:[y.map((function(t,e){return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:l()("mt-4 font-bold",0===r&&"mt-8"),children:t[0].type}),(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-1",children:u.UID((function(t){var n,c;return(0,p.jsx)("div",{children:(0,p.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,p.jsx)("input",{type:"checkbox",name:"".concat(t.type,"-").concat(t.type.replace(" ","-"),"-checkbox"),style:{color:null!==(n=null===(c=a.find((function(e){return e.value===t.value})))||void 0===c?void 0:c.color)&&void 0!==n?n:s.Xg[e%s.Xg.length]},className:"my-1 cursor-pointer ",value:t.value,checked:!!o.find((function(e){return e.value===t.value})),onChange:function(){return i(t.value)}}),(0,p.jsx)("span",{className:"ml-2",children:t.value})]})},"".concat(t.type,"-").concat(r))}),u.mNm(u.vgT("value"),t))})]},"".concat(t[0].value,"-").concat(r,"-").concat(e))})),b.map((function(t,e){return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:l()("mt-4 font-bold",0===r&&"mt-8"),children:t[0].type}),(0,p.jsx)(g.E,{value:c[t[0].type],onChange:function(n){return v((function(r){return h(h({},r),{},(0,d.Z)({},t[e].type,n))}))},children:(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-1",children:u.UID((function(t){return(0,p.jsx)(g.E.Option,{value:t.value,className:"cursor-pointer focus:outline-none",children:function(e){var n=e.active,r=e.checked;return(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("span",{className:l()(r?"bg-indigo-600 border-transparent":"bg-white border-gray-300",n?"ring-2 ring-offset-2 ring-indigo-500":"","h-4 w-4 rounded-full border flex items-center justify-center"),"aria-hidden":"true",children:(0,p.jsx)("span",{className:"rounded-full bg-white w-1.5 h-1.5"})}),(0,p.jsxs)(g.E.Label,{as:"span",children:[t.value," ",r]})]})}},"".concat(n,"-").concat(t.type,"-").concat(t.value))}),u.mNm(u.vgT("value"),t))})})]},"".concat(t[0].value,"-").concat(r,"-").concat(e))}))]})},x=n(2870),y=n(178),b=n.n(y),k="$";function j(){}function w(t,e){var n=new j;if(t instanceof j)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,a=-1,i=t.length;if(null==e)for(;++a<i;)n.set(a,t[a]);else for(;++a<i;)n.set(e(r=t[a],a,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}j.prototype=w.prototype={constructor:j,has:function(t){return k+t in this},get:function(t){return this[k+t]},set:function(t,e){return this[k+t]=e,this},remove:function(t){var e=k+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===k&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===k&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===k&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===k&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===k&&++t;return t},empty:function(){for(var t in this)if(t[0]===k)return!1;return!0},each:function(t){for(var e in this)e[0]===k&&t(this[e],e.slice(1),this)}};var N=w;function O(){var t,e,n,r=[],a=[];function i(n,a,o,c){if(a>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var l,u,s,d=-1,f=n.length,g=r[a++],p=N(),v=o();++d<f;)(s=p.get(l=g(u=n[d])+""))?s.push(u):p.set(l,[u]);return p.each((function(t,e){c(v,e,i(t,a,o,c))})),v}function o(t,n){if(++n>r.length)return t;var i,c=a[n-1];return null!=e&&n>=r.length?i=t.entries():(i=[],t.each((function(t,e){i.push({key:e,values:o(t,n)})}))),null!=c?i.sort((function(t,e){return c(t.key,e.key)})):i}return n={object:function(t){return i(t,0,A,S)},map:function(t){return i(t,0,C,D)},entries:function(t){return o(i(t,0,C,D),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return a[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}function A(){return{}}function S(t,e,n){t[e]=n}function C(){return N()}function D(t,e,n){t.set(e,n)}function B(){}var P=N.prototype;function z(t,e){var n=new B;if(t instanceof B)t.each((function(t){n.add(t)}));else if(t){var r=-1,a=t.length;if(null==e)for(;++r<a;)n.add(t[r]);else for(;++r<a;)n.add(e(t[r],r,t))}return n}B.prototype=z.prototype={constructor:B,has:P.has,add:function(t){return this[k+(t+="")]=t,this},remove:P.remove,clear:P.clear,values:P.keys,size:P.size,empty:P.empty,each:P.each};var L=n(7484),E=n.n(L),F=function(t,e){return function(n){var r,a;return n.append("text").attr("x",e.left).attr("y",0).attr("font-weight","500").attr("class","font-apex text-base fill-current tracking-tighter text-alex-black").text(null!==(r=null===(a=t[0])||void 0===a?void 0:a.unit)&&void 0!==r?r:"").call((function(t){t.each((function(){for(var t,e=x.select(this),n=e.text().split(/\s+/).reverse(),r=n.length>1?{x:5,y:10}:{x:0,y:0},a=.875,i=parseFloat(".35rem"),o=0,c=e.text(null).append("tspan").attr("x",r.x).attr("dy",r.y+o*a+i+"px").attr("y",0),l=[],u=void 0;u=n.pop();)l.push(u),c.text(l.join(" ")),c.node().getComputedTextLength()>100&&(l.pop(),c.text(l.join(" ")),l=[u],o++,c=e.append("tspan").attr("x",r.x).attr("y",10+o*a*16+i).attr("dy",o*a+i+"px").text(u));var s=24-(null===(t=e.node().getBBox())||void 0===t?void 0:t.height)/2;e.attr("transform","translate(0, ".concat(s,")"))}))}))}},I=n(1077),M=["total","all","somalia","both sex","all area","all products","all age","total quantity","all domains","total activity"],R=["male","female"],T=["urban","rural","nomadic"];function X(t){var e=Number((0,a.ji)(t));return I.MV[e-1]}var Z=function(t,e,n,r){var a,i,o=t.disagg?K(t,e):t.key,c=null!==(a=null===(i=r.find((function(t){return o.trim()===t.value.trim()})))||void 0===i?void 0:i.color)&&void 0!==a?a:X(n);return null!==c&&void 0!==c?c:"#e0e0e0"};function K(t,e){var n,r,a;return null!==(n=null===t||void 0===t||null===(r=t.disagg)||void 0===r||null===(a=r.find((function(t){return t.type===e})))||void 0===a?void 0:a.value)&&void 0!==n?n:null}var U=function(t,e,n){var r;return M.includes(null===(r=String(t))||void 0===r?void 0:r.toLowerCase())?I.MV[Number((0,a.ji)(n))-1]:s.Xg[e%s.Xg.length]},V=20,Y=function(t){var e=x.select(t).attr("width","100%").attr("height","100%");e.selectAll("rect").remove(),e.selectAll("text").remove()},_=function(t,e,n){Y(n);var r=x.select(n).attr("width","100%").attr("height","100%");r.selectAll("mydots").data(t).enter().append("rect").attr("x",(function(){return 100})).attr("y",(function(t,e){return 25*e})).attr("width",V).attr("height",V).style("fill",(function(t){return e({key:t})})),r.selectAll("mylabels").data(t).enter().append("text").attr("x",(function(){return 124})).attr("y",(function(t,e){return 25*e+10})).style("fill",(function(t){return e({key:t})})).text((function(t){return t})).attr("text-anchor","left").style("alignment-baseline","middle")},H=function(t,e,n){return 1===t.length&&0===t[0].y?x.scaleLinear().domain([0,x.max(t,(function(t){return t.y}))+1]).range([e-n.bottom,n.top]):x.min(t,(function(t){return t.y}))<0?x.scaleLinear().domain([x.min(t,(function(t){return t.y}))-.5,x.max(t,(function(t){return t.y}))]).nice().range([e-n.bottom,n.top]):x.scaleLinear().domain([x.min(t,(function(t){return t.y}))<2||1===t.length?0:.95*+parseFloat(x.min(t,(function(t){return t.y}))).toPrecision(2),x.max(t,(function(t){return t.y}))<1?parseFloat(x.max(t,(function(t){return t.y}))).toPrecision(1):100===x.max(t,(function(t){return t.y}))?100:x.max(t,(function(t){return t.y}))]).nice().range([e-n.bottom,n.top])};function q(t,e){var n=null===e||void 0===e?void 0:e.find((function(e){return t&&t.indexOf(e)>-1}));return!!["tanzania","south africa","sweden","somalia"].some((function(t){return(null===n||void 0===n?void 0:n.toLowerCase())===t}))||!!M.some((function(t){return(null===n||void 0===n?void 0:n.toLowerCase())===t}))}E().extend(b());var G=function(t){var e,n=t.country,r=t.data,a=t.indicator,i=t.currentDisaggregationName,c=t.matchingColors,l=t.legend,u=t.colorful,d=t.isPrinting,f=(0,o.useRef)(),g=(0,o.useRef)(),v=(0,s.l0)((null===(e=r[0])||void 0===e?void 0:e.unit)||""),h=new Set(r.map((function(t){return t.id}))).size,m=function(t){return Z(t,i,a,c)};return(0,o.useEffect)((function(){!function(t){var e,a,o,c,s=parseInt(null!==(e=null===(a=x.select("#viz-panel"))||void 0===a||null===(o=a.node())||void 0===o||null===(c=o.getBoundingClientRect())||void 0===c?void 0:c.width)&&void 0!==e?e:100,10),f=500,g={top:48,right:30,bottom:30,left:72},p=x.select(t).attr("width",s).attr("height",f);p.selectAll("g").remove();var y=x.scaleUtc().domain([x.min(r,(function(t){return E()(t.x).utc(!0).toDate()})),x.max(r,(function(t){return E()(t.x).utc(!0).toDate()}))]).range([g.left,s-g.right]),b=x.scaleUtc().domain([x.min(r,(function(t){return E()(t.x).utc(!0).toDate()})),x.max(r,(function(t){return E()(t.x).utc(!0).toDate()}))]).range([g.left+36,s-g.right]),k=H(r,f,g);p.append("g").call((function(t){return t.attr("transform","translate(".concat(g.left-5,", 0)")).attr("class","font-apex text-alex-black text-base tracking-tighter").call(x.axisLeft(k).ticks(5).tickFormat(v).tickSize(0).tickPadding(8)).call((function(t){return t.select(".domain").remove()}))})),p.append("g").call((function(t){return t.attr("transform","translate(".concat(g.left-5,", 0)")).attr("class","y-axis-line text-alex-gray opacity-30").style("stroke-width",.6).call(x.axisLeft(k).ticks(6).tickFormat("").tickSize(-s+g.left+g.right-15)).call((function(t){return t.select(".domain").remove()}))})),p.append("g").call(F(r,g)),p.append("g").call((function(t){return t.attr("transform","translate(0, ".concat(Number(f)-g.bottom+5,")")).attr("class","text-gray-300").style("stroke-width",.6).call(x.axisBottom(b).ticks(5).tickSize(-500+g.top+g.bottom-10).tickFormat((function(t){return t<=x.utcYear(t)?t.getUTCFullYear():null})).tickPadding(8).tickSizeOuter(0)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.selectAll("line").attr("class","opacity-30")})).call((function(t){return t.selectAll("text").attr("class","font-apex text-base tracking-tighter text-alex-black opacity-100").attr("transform",s<=500?"rotate(45)":void 0)}))})),p.append("g").call((function(t){return t.attr("transform","translate(0, ".concat(Number(f)-g.bottom,")")).attr("class","font-apex text-base text-alex-black tracking-tighter").call(x.axisBottom(y).ticks(5).tickSize(0).tickFormat("").tickPadding(8)).call((function(t){return t.select(".domain").attr("class","text-gray-300").attr("stroke-width",2)}))}));var j=O().key((function(t){return t.id.length?t.id:"No ID"})).entries(r),w=p.append("g").attr("id","svg-chart").selectAll("g").data(j).join("g");x.select("body").select("#ttip").remove();var N=x.select("body").append("div").attr("id","ttip").attr("class","tooltip3 pointer-events-none").style("display","none"),A=function(t){return u||d||h<=1||""==t.id||"No ID"==t.key||q(t.key,l)||q(t.id,l)?m(t):"#e0e0e0"};w.append("path").attr("fill","none").attr("stroke-width",3).attr("stroke-linejoin","round").attr("stroke-linecap","round").style("mix-blend-mode","multiply").attr("stroke",A).attr("d",(function(t){return x.line().x((function(t){return b(E()(t.x).utc(!0).toDate())})).y((function(t){return k(t.y)})).curve(x.curveMonotoneX)(t.values)})).on("mouseover",S).on("mousemove",C).on("mouseout",D),w.selectAll("circle").append("g").data((function(t){return t.values})).enter().append("circle").attr("stroke",A).attr("fill","white").attr("stroke-width",2).attr("cx",(function(t){return b(E()(t.x).utc(!0).toDate())})).attr("cy",(function(t){return k(t.y)})).attr("r",3).on("mouseover",S).on("mousemove",C).on("mouseout",D),d&&(w.selectAll("text").data((function(t){return t.values})).enter().append("text").attr("x",(function(t){return b(E()(t.x).utc(!0).toDate())-20})).attr("y",(function(t){return k(t.y)-10})).attr("fill",A).text((function(t){return v(t.y)})),w.selectAll("text").each((function(t){var e=this.getBBox();"0"!=this.style.opacity&&w.selectAll("text").filter((function(e){return e!=t})).each((function(){var t=this.getBBox();"0"!=this.style.opacity&&function(t,e){t.left=t.x-5,t.right=t.x+t.width+5,t.top=t.y-5,t.bottom=t.y+t.height+5,e.left=e.x-5,e.right=e.x+e.width+5,e.top=e.y-5,e.bottom=e.y+e.height+5;var n=t,r=e;return!(n.left>=r.right||n.top>=r.bottom||n.right<=r.left||n.bottom<=r.top)}(e,t)&&x.select(this).style("opacity",0)}))})));function S(){N.style("display","inline")}function C(t,e){var r,a=Array.isArray(e)||"values"in e,i="values"in e?e.values[0]:Array.isArray(e)?e[0]:e;i.disagg&&"No ID"!==e.key?N.html('\n            <div class="font-apex text-gray-600 shadow-md text-base bg-white bg-opacity-80 p-4">\n            <p>'.concat(null===(r=i.disagg)||void 0===r?void 0:r.map((function(t){return'<span class="text-gray-400">'.concat(t.type,"</span> ").concat(t.value)})).join("<br />"),"</p>\n            ").concat(a?"":"<p>".concat(v(i.y),"</p>"),"\n            ").concat(a?"":'<p class="text-gray-400">'.concat(e.x,"</p>"),"\n            </div>\n            ")):N.html('\n            <div class="font-apex text-gray-600 shadow-md text-base bg-white bg-opacity-80 p-4">\n            <p class="text-gray-400">'.concat(n,"</p>\n            </div>\n            "));var o=N.node().getBoundingClientRect();N.style("top",t.pageY-o.height+32+"px").style("left",t.pageX-32+"px")}function D(){N.style("display","none")}w.on("mouseover",(function(t,e){w.each((function(){var t=x.select(this);t.selectAll("path").attr("stroke",(function(t){return u||t.key===e.key||!i||q(t.key,l)?m(t):"#e0e0e0"})),t.selectAll("circle").attr("stroke",(function(t){return u||t.id===e.key||!i||q(t.id,l)?m(t):"#e0e0e0"}))}))})).on("mouseout",(function(){return w.each((function(){var t=x.select(this);t.selectAll("path").attr("stroke",A),t.selectAll("circle").attr("stroke",A)}))}))}(f.current)}),[r,u,d]),(0,o.useEffect)((function(){d?l.length&&_(l,m,g.current):Y(g.current)}),[l,u,d]),(0,p.jsxs)("div",{className:"flex flex-col overflow-visible",children:[(0,p.jsx)("svg",{ref:f,className:"overflow-visible"}),d&&!!l.length&&(0,p.jsx)("svg",{ref:g})]})};function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t){var e=String(t).toLowerCase().split("-+-"),n=(0,f.Z)(e,1)[0];return!!["tanzania","south africa","sweden","somalia"].some((function(t){return n.includes(t)}))||!!["total","all","both"].some((function(t){return n.includes(t)}))}E().extend(b());var J=function(t){var e,n=t.data,r=t.indicator,i=t.currentDisaggregationName,c=t.matchingColors,l=t.legend,f=t.hideBar,g=t.isPrinting,v=t.colorful,h=(0,o.useRef)(),m=(0,o.useRef)(),y=(0,s.l0)((null===(e=n[0])||void 0===e?void 0:e.unit)||""),b=new Set(n.map((function(t){return t.id}))).size,k=function(t){return Z(t,i,r,c)},j=function(t){return function(t,e,n,r,a){var i,o,c=t.disagg?K(t,e):t.key,l=null!==(i=null===(o=a.find((function(t){return c.trim()===t.value.trim()})))||void 0===o?void 0:o.color)&&void 0!==i?i:X(n);return null!==l&&void 0!==l?l:"#e0e0e0"}(t,i,r,0,c)};return(0,o.useEffect)((function(){!function(t){var e,r,o,c,l=parseInt(null!==(e=null===(r=x.select("#chart"))||void 0===r||null===(o=r.node())||void 0===o||null===(c=o.getBoundingClientRect())||void 0===c?void 0:c.width)&&void 0!==e?e:100,10),s=500,p={top:48,right:30,bottom:30,left:72},h=x.select(t).attr("width","100%").attr("height",s);h.selectAll("g").remove();var m=Array.from(new Set(n.map((function(t){return t.x})))),w=240*m.length,N=H(n,s,p),O=x.scaleBand().domain(m).range([Math.max(p.left,(p.left+l-p.right-w)/2),Math.min((p.left+l-p.right+w)/2,l-p.right)]).paddingInner(.2).paddingOuter(.2),A=1===n.length&&n[0].y<1?[0,n[0].y/2,.95*n[0].y]:[],S=x.scaleBand().domain(m).range([p.left,l-p.right]).paddingInner(.5).paddingOuter(.5);h.append("g").call((function(t){return t.attr("transform","translate(0, ".concat(s-p.bottom,")")).attr("class","text-gray-600").attr("stroke-width",1.3).call(x.axisBottom(O).ticks(5).tickFormat((function(t){return t})).tickSize(0).tickSizeOuter(0).tickPadding(8)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.selectAll("text").attr("class","font-apex text-base tracking-tighter text-alex-black opacity-100")}))})),h.append("g").call((function(t){return t.attr("transform","translate(".concat(p.left,", 0)")).attr("class","text-gray-600").call(A.length>0?x.axisLeft(N).tickValues(A).tickSize(0).tickFormat(y):x.axisLeft(N).tickSize(0).tickFormat(y).ticks(5)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.selectAll("text").attr("class","text-alex-black font-apex text-base tracking-tighter")}))})),h.append("g").call((function(t){return t.attr("transform","translate(".concat(p.left,", 0)")).attr("class","y-axis-line text-gray-300 opacity-30").style("stroke-width",.6).call(A.length>0?x.axisLeft(N).tickValues([0,n[0].y/2,n[0].y]).tickSize(-l+p.left+p.right).tickFormat(""):x.axisLeft(N).tickSize(-l+p.left+p.right).tickFormat("").ticks(5)).call((function(t){return t.select(".domain").remove()}))})),h.append("g").call(F(n,p)),h.append("g").call((function(t){return t.attr("transform","translate(0, ".concat(s-p.bottom,")")).attr("class","text-gray-600").attr("stroke-width",1.3).call(x.axisBottom(S).tickFormat("").ticks(0).tickSize(0)).call((function(t){return t.select(".domain").attr("class","text-gray-300")}))}));var C=h.append("g"),D=x.select("body").append("div").attr("id","ttip").attr("class","tooltip3 pointer-events-none").style("display","none"),B=function(t){return v||g||b<=1||""==t.id||"No ID"==t.key||W(t.key)||W(t.id)?j(t):"#e0e0e0"},P=n.map((function(t){var e;return $($({},t),{},(0,d.Z)({},null===(e=t.disagg.find((function(t){return t.type===i})))||void 0===e?void 0:e.value,t.y))})).sort((function(t,e){return t.x.localeCompare(e.x)})),z=u.jj$(n.map((function(t){var e;return null===(e=t.disagg.find((function(t){return t.type===i})))||void 0===e?void 0:e.value}))),L=x.scaleBand().domain(z).range([0,O.bandwidth()]).padding(.05);C.append("g").selectAll("g").data(P).enter().append("g").attr("transform",(function(t){return"translate("+(O(t.x)+.3*L.bandwidth())+",0)"})).selectAll("rect").data((function(t){return z.map((function(e){return{key:e,value:t[e]}})).filter((function(t){return t.value}))})).enter().append("rect").attr("fill",B).attr("x",(function(t){return L(t.key)})).attr("y",(function(t){return N(t.value)})).attr("width",1===z.length?L.bandwidth()/2:L.bandwidth()).attr("height",(function(t){return N(N.domain()[0])-N(t.value)})).on("mouseover",(function(t,e){D.style("display","inline"),C.each((function(){x.select(this).selectAll("rect").attr("fill",(function(t){return v||t.key===e.key||!i||W(t.key)?k(t):"#e0e0e0"}))}))})).on("mousemove",(function(t,e){D.html('\n          <div class="font-apex text-gray-600 shadow-md text-sm bg-white bg-opacity-80 p-4">\n            '.concat(e.key?"<p>".concat(e.key,"</p>"):"","\n            <p>").concat(y(e.value),"</p>\n          </div>\n        "));var n=D.node().getBoundingClientRect();D.style("top",t.pageY-n.height+16+"px").style("left",t.pageX-32+"px")})).on("mouseout",I).on("click",(function(t,e){f(e.key),I()}));var E=1===z.length?L.bandwidth()/2:L.bandwidth();function I(){D.style("display","none")}g?E<20?C.selectAll("text").data(P.flatMap((function(t){return z.map((function(e){return{key:e,value:t[e],x:t.x}})).filter((function(t){return t.value}))}))).enter().append("text").attr("x",0).attr("y",0).attr("fill",k).text((function(t){return y(t.value)})).attr("text-anchor","start").attr("transform",(function(t){return"translate(".concat(O(t.x)+L(t.key)+L.bandwidth()/2+12,", ").concat(N(t.value)-10,") rotate(-90)")})):C.selectAll("text").data(P.flatMap((function(t){return z.map((function(e){return{key:e,value:t[e],x:t.x}})).filter((function(t){return t.value}))}))).enter().append("text").attr("x",(function(t){return 1===z.length?O(t.x)+L(t.key)+L.bandwidth()/2:O(t.x)+L(t.key)+L.bandwidth()/1.5})).attr("y",(function(t){return N(t.value)-10})).attr("fill",k).text((function(t){return y(t.value)})).attr("text-anchor","middle"):E>15&&C.selectAll("text").data(P.flatMap((function(t){return z.map((function(e){return{key:e,value:t[e],x:t.x}})).filter((function(t){return t.key&&t.value}))}))).enter().append("text").attr("x",0).attr("y",0).attr("fill",k).text((function(t){return(0,a.Qs)(t.key)})).attr("class","font-apex text-xs").attr("text-anchor","start").attr("transform",(function(t){return"translate(".concat(O(t.x)+L(t.key)+L.bandwidth()/2+12,", ").concat(N(t.value)-10,") rotate(-90)")})),C.on("mouseout",(function(){return C.each((function(){x.select(this).selectAll("rect").attr("fill",B)}))}))}(m.current)}),[n,g,v]),(0,o.useEffect)((function(){g?l.length&&_(l,k,h.current):Y(h.current)}),[l,v,g]),(0,p.jsxs)("div",{className:"flex flex-col overflow-visible",children:[(0,p.jsx)("svg",{ref:m,className:"overflow-visible"}),g&&!!l.length&&(0,p.jsx)("svg",{ref:h})]})};E().extend(b());var tt=function(t){var e,n=t.data,r=t.indicator,a=t.currentDisaggregationName,i=t.matchingColors,c=t.legend,l=t.hideBar,d=(0,o.useRef)(),f=(0,o.useRef)(),g=(0,s.l0)((null===(e=n[0])||void 0===e?void 0:e.unit)||""),v=function(t){return Z(t,a,r,i)};return(0,o.useEffect)((function(){!function(t){var e,r,a,i,o=parseInt(null!==(e=null===(r=x.select("#chart"))||void 0===r||null===(a=r.node())||void 0===a||null===(i=a.getBoundingClientRect())||void 0===i?void 0:i.width)&&void 0!==e?e:100,10),c=500,s={top:48,right:30,bottom:30,left:72},d=x.select(t).attr("width","100%").attr("height",c);d.selectAll("g").remove();var f=Array.from(new Set(n.map((function(t){return t.x})))),p=240*f.length,h=H(n,c,s),m=x.scaleBand().domain(f).range([Math.max(s.left,(s.left+o-s.right-p)/2),Math.min((s.left+o-s.right+p)/2,o-s.right)]).paddingInner(.5).paddingOuter(.5),y=x.scaleBand().domain(f).range([s.left,o-s.right]).paddingInner(.5).paddingOuter(.5);d.append("g").call((function(t){return t.attr("transform","translate(0, ".concat(c-s.bottom,")")).attr("class","text-gray-600").attr("stroke-width",1.3).call(x.axisBottom(m).ticks(5).tickFormat((function(t){return t})).tickSize(0).tickSizeOuter(0).tickPadding(8)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.selectAll("text").attr("class","font-apex text-base tracking-tighter text-alex-black opacity-100")}))})),d.append("g").call((function(t){return t.attr("transform","translate(".concat(s.left,", 0)")).attr("class","text-gray-600").call(x.axisLeft(h).ticks(6).tickSize(0).tickFormat(g)).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.selectAll("text").attr("class","text-alex-black font-apex text-base tracking-tighter")}))})),d.append("g").call((function(t){return t.attr("transform","translate(0, ".concat(c-s.bottom,")")).attr("class","text-gray-600").attr("stroke-width",1.3).call(x.axisBottom(y).tickFormat("").ticks(0).tickSize(0)).call((function(t){return t.select(".domain").attr("class","text-gray-300")}))})),d.append("g").call(F(n,s));var b=x.select("body").append("div").attr("id","ttip").attr("class","tooltip3 pointer-events-none").style("display","none"),k=d.append("g"),j=u.tOM(u.vgT("x"),n).map((function(t){return t.sort((function(t,e){return e.y-t.y}))})),w=j.map((function(t){return t.map((function(e,n){var r;return e.y-(null===(r=t[n+1])||void 0===r?void 0:r.y)})).filter(Boolean)})).some((function(t){return t.some((function(t){return t<.5}))}));function N(){b.style("display","none")}n=u.xHg(j),k.append("g").selectAll("rect").data(n).join("rect").attr("fill",v).attr("x",(function(t){return m(t.x)})).attr("y",(function(t){return h(t.y)})).attr("width",m.bandwidth()).attr("height",(function(t){return h(h.domain()[0])-h(t.y)})).on("mouseover",(function(){b.style("display","inline")})).on("mousemove",(function(t,e){var n;if(e.id){b.html('\n          <div class="font-apex text-gray-600 shadow-md text-sm bg-white bg-opacity-80 p-4">\n            <p>'.concat(null===(n=e.disagg)||void 0===n?void 0:n.map((function(t){return'<span class="text-gray-400">'.concat(t.type,"</span> ").concat(t.value)})).join("<br />"),"</p>\n            <p>").concat(g(e.y),'</p>\n            <p class="text-gray-400">').concat(e.x,"</p>\n          </div>\n          "));var r=b.node().getBoundingClientRect();b.style("top",t.pageY-r.height+16+"px").style("left",t.pageX-32+"px")}})).on("mouseout",N).on("click",(function(t,e){l(e.id),N()})),w||k.selectAll("text").data(n).enter().append("text").attr("x",(function(t){return m(t.x)-50})).attr("y",(function(t){return h(t.y)})).attr("fill",v).text((function(t){return g(t.y)}))}(d.current)}),[n]),(0,o.useEffect)((function(){_(c,v,f.current)}),[c]),(0,p.jsxs)("div",{className:"flex flex-col overflow-visible",children:[(0,p.jsx)("svg",{ref:d,className:"overflow-visible"}),(0,p.jsx)("svg",{ref:f})]})},et=n(3960),nt=n(8916),rt=[{type:"line",icon:et.TY},{type:"bar",icon:et.hz},{type:"stacked-bar",icon:et.OK}],at=function(t){var e=t.data,n=t.indicator,c=t.country,d=t.type,f=t.isPrinting,g=t.exportAsImage,v=String(n).trim().toLowerCase(),h=(0,o.useMemo)((function(){return u.tOM(u.vgT("type"),u.xHg(u.UID((function(t){return t.disaggregations}),null===e||void 0===e?void 0:e.data)))}),[null===e||void 0===e?void 0:e.data]),x=(0,o.useState)(0),y=x[0],b=x[1],k=(0,o.useState)("line"),j=k[0],w=k[1],N=(0,o.useState)(h.length>0?h[y][0].type:""),O=N[0],A=N[1],S=(0,o.useState)(h.length>0?h[y]:[]),C=S[0],D=S[1],B=(0,o.useState)((function(){var t={};return h.filter((function(t){return t.some((function(t){return t.type!==O}))})).forEach((function(e){t[(0,a.fm)(e[0].type)]=e[0].value})),t})),P=B[0],z=B[1],L=function(t){C.find((function(e){return e.value===t}))?D(C.filter((function(e){return e.value!==t}))):D([].concat((0,r.Z)(C),[{type:O,value:t}]))},E=Array.from(new Set(C.map((function(t){return t.value})))),F=h.length>0?u.mNm(u.vgT("value"),h[y]).map((function(t,e){return{type:d,value:t.value,color:E.length<=1?I.MV[Number((0,a.ji)(v))-1]:[].concat((0,r.Z)(T),(0,r.Z)(R)).includes(String(t.value).toLowerCase())?s.cW[String(t.value).toLowerCase()]:U(t.value,e,v)}})):[];(0,o.useEffect)((function(){z((function(){var t={};return h.filter((function(t){return t.some((function(t){return t.type!==O}))})).forEach((function(e){t[e[0].type]=e[0].value})),t}))}),[O]);var X=u.qCK(u.xbD,u.SpD),Z=(0,o.useMemo)((function(){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(t){return Object.keys(t.data).map((function(e){var n,r;return{x:e,y:"string"===typeof t.data[e].value?Number(t.data[e].value.replace(",","")):t.data[e].value,unit:t.data[e].unit,disagg:t.disaggregations,id:null!==(n=null===(r=t.disaggregations)||void 0===r?void 0:r.map((function(t){return t.value})).join("-+-"))&&void 0!==n?n:"".concat(e,"-").concat(c)}}))}));return u.hXT((function(t){return!(Object.values(P).length>0)||X(Object.values(P),t.disagg.map((function(t){return t.value})).filter((function(t){return!C.map((function(t){return t.value})).includes(t)})))}),u.hXT((function(t){return!(t.disagg.length>0)||t.disagg.some((function(t){return C.some((function(e){return e.value===t.value}))}))}),u.xHg(n)))}),[e,C,P]),K=1===u.tOM(u.vgT("x"),Z).length,V=E.length<=1||1===E.filter((function(t){return M.includes(t.toLowerCase())})).length,Y=u.hXT((function(t){return 0===t.y}),Z).length>1;return(0,o.useEffect)((function(){K&&w("bar")}),[K]),(0,p.jsx)("section",{className:"w-full h-full",id:"chart",children:(0,p.jsxs)(i.mQ,{defaultIndex:y,onChange:function(t){D(h[t]),b(t),A(h[t][0].type)},children:[(0,p.jsxs)(i.td,{className:"flex flex-row items-center justify-between bg-white border-b border-gray-300",children:[(0,p.jsx)("div",{children:h.length>0?h.map((function(t,e){return(0,p.jsx)(i.OK,{className:l()(y===e&&"border-b-4 border-goals-".concat((0,a.ji)(v))),children:(0,p.jsx)("div",{className:l()("px-5 py-2 text-xl tracking-wide uppercase sm:text-2xl font-SDGSans",y===e&&"text-goals-".concat((0,a.ji)(v))),children:t[0].type})},t[0].type)})):(0,p.jsx)(i.OK,{className:"border-b-4 text-goals-".concat((0,a.ji)(v)," border-goals-").concat((0,a.ji)(v)),children:(0,p.jsx)("div",{className:"px-5 py-2 text-xl tracking-wide uppercase sm:text-2xl font-SDGSans",children:c})})}),(0,p.jsxs)("div",{className:"flex flex-row px-8 text-gray-400 sm:flex space-x-4",children:[rt.map((function(t){return(0,p.jsx)("button",{className:l()("cursor-pointer focus:outline-none disabled:text-gray-200 disabled:cursor-not-allowed","hover:text-goals-".concat((0,a.ji)(v)," active:text-goals-").concat((0,a.ji)(v)),K&&"line"===t.type&&"hidden",V&&"stacked-bar"===t.type&&"hidden",Y&&"line"!==t.type&&"hidden"),onClick:function(){return w(t.type)},children:(0,p.jsx)(t.icon,{className:l()("h-8",j===t.type&&"text-goals-".concat((0,a.ji)(v)))})},t.type)})),!f&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"w-0.5 bg-gray-200"}),(0,p.jsx)("button",{className:l()("cursor-pointer focus:outline-none disabled:text-gray-200 disabled:cursor-not-allowed","hover:text-goals-".concat((0,a.ji)(v)," active:text-goals-").concat((0,a.ji)(v))),onClick:function(){g(v)},children:(0,p.jsx)(nt._,{className:l()("h-8","hover:text-goals-".concat((0,a.ji)(v)))})})]})]})]}),(0,p.jsxs)(i.nP,{className:"pb-12",children:[(0,p.jsxs)("div",{id:"viz-panel",className:"mt-6",children:[(0,p.jsx)("div",{className:"line"===j?"visible":"hidden",children:(0,p.jsx)(G,{colorful:f,isPrinting:f,country:c,legend:E,data:Z,currentDisaggregationName:O,indicator:v,matchingColors:F})}),(0,p.jsx)("div",{className:l()("bar"===j?"visible":"hidden",{"px-2 overflow-visible":f}),children:(0,p.jsx)(J,{colorful:f,isPrinting:f,legend:E,data:"bar"===j?Z:(0,r.Z)(Z),currentDisaggregationName:O,indicator:v,matchingColors:F,hideBar:L})}),(0,p.jsx)("div",{className:l()("stacked-bar"===j?"visible":"hidden",{"px-2 overflow-visible":f}),children:(0,p.jsx)(tt,{legend:E,data:Z,currentDisaggregationName:O,indicator:v,matchingColors:F,hideBar:L})})]}),!f&&(0,p.jsx)(m,{currentDisaggregationName:O,selectedDisaggregation:y,disaggregations:h,matchingColors:F,onCheckBoxesChange:L,selectedCheckboxes:C,toggleRadio:P,setToggleRadio:z})]})]})})}}}]);